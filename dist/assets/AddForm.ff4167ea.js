import{n as l,u as V,p as h,_ as S}from"./index.a2bf8911.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{d as w,e as n,c as k,u as F,aS as M,aL as I,C as A,aE as L,aH as r,aI as o,bU as C,aW as U,b7 as $,cc as O,aV as P,bS as T,bc as R}from"./arco.b02d9b55.js";import{B as H,u as N}from"./index.c4821ce7.js";import{u as j}from"./loading.7f7bf96d.js";import{I as q}from"./IconPicker.7129cb1a.js";import{I as z}from"./Icon.031e5930.js";function me(e){return l.get({url:"/system/dept/get_list",params:e},{errorMessageMode:"none"})}function W(){return l.get({url:"/system/dept/get_parent"},{errorMessageMode:"none"})}function Y(e){return l.post({url:"/system/dept/save",params:e},{errorMessageMode:"message"})}function ie(e){return l.post({url:"/system/dept/upStatus",params:e},{errorMessageMode:"message"})}function pe(e){return l.delete({url:"/system/dept/del",params:e},{errorMessageMode:"message"})}const G=w({name:"AddForm",components:{BasicModal:H,IconPicker:q,Icon:z},emits:["success"],setup(e,{emit:t}){const{t:B}=V(),d=n(!1),m=n([]),i=n(),u=n({id:0,name:"",pid:0,weigh:1,remark:""}),c=n(""),[f,{setModalProps:g,closeModal:E}]=N(async s=>{var D;(D=i.value)==null||D.resetFields(),g({confirmLoading:!1});const p=await W(),y=[{id:0,name:"\u4E00\u7EA7\u90E8\u95E8",pid:0}];p?m.value=y.concat(p):m.value=y,d.value=!!(s!=null&&s.isUpdate),F(d)&&(c.value=s.record.component,u.value=h(s.record))}),b=k(()=>F(d)?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),{loading:a,setLoading:_}=j();return{registerModal:f,getTitle:b,handleSubmit:async()=>{var s;try{await((s=i.value)==null?void 0:s.validate())||(_(!0),M.loading({content:"\u66F4\u65B0\u4E2D",id:"upStatus"}),await Y(F(u)),M.success({content:"\u66F4\u65B0\u6210\u529F",id:"upStatus"}),E(),t("success"),_(!1))}catch{_(!1),M.clear("top")}},formRef:i,loading:a,formData:u,parntList:m,t:B,OYoptions:[{label:"\u5426",value:0},{label:"\u662F",value:1}]}}});function J(e,t,B,d,m,i){const v=U,u=$,c=O,f=P,g=T,E=R,b=I("BasicModal");return A(),L(b,C(e.$attrs,{onRegister:e.registerModal,loading:e.loading,helpMessage:"\u7F16\u8F91\u548C\u4FEE\u6539\u90E8\u95E8",width:"600px",minHeight:280,title:e.getTitle,onOk:e.handleSubmit}),{default:r(()=>[o(E,{ref:"formRef",model:e.formData,"auto-label-width":"",style:{padding:"10px 20px"}},{default:r(()=>[o(u,{field:"name",label:"\u90E8\u95E8\u540D\u79F0","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u90E8\u95E8\u540D\u79F0"}],style:{"margin-bottom":"15px"}},{default:r(()=>[o(v,{modelValue:e.formData.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.formData.name=a),placeholder:"\u8BF7\u586B\u5199\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(u,{label:"\u4E0A\u7EA7\u90E8\u95E8",field:"pid",style:{"margin-bottom":"15px"}},{default:r(()=>[o(c,{placeholder:"\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",data:e.parntList,fieldNames:{key:"id",title:"name",children:"children"},modelValue:e.formData.pid,"onUpdate:modelValue":t[1]||(t[1]=a=>e.formData.pid=a)},null,8,["data","modelValue"])]),_:1}),o(u,{label:"\u6392\u5E8F",field:"weigh",style:{"margin-bottom":"15px"}},{default:r(()=>[o(f,{modelValue:e.formData.weigh,"onUpdate:modelValue":t[2]||(t[2]=a=>e.formData.weigh=a),placeholder:"\u8BF7\u586B\u6392\u5E8F"},null,8,["modelValue"])]),_:1}),o(u,{field:"remark",label:"\u5907\u6CE8","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:r(()=>[o(g,{modelValue:e.formData.remark,"onUpdate:modelValue":t[3]||(t[3]=a=>e.formData.remark=a),placeholder:"\u8BF7\u586B\u5199\u5907\u6CE8","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","loading","title","onOk"])}const K=S(G,[["render",J]]),ce=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{K as A,ce as a,pe as d,me as g,ie as u};
