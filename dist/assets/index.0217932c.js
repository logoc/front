import{n as Q,u as X,_ as Z}from"./index.a2bf8911.js";/* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               */import{c as z,d as ee,r as te,e as p,o as ae,w as oe,aL as B,C as c,D as m,aI as t,u as s,aH as a,aN as l,aO as d,aF as _,c0 as ne,aW as se,bM as le,bb as ie,b_ as ue,aY as re,c4 as ce,ba as me,b$ as pe,c6 as de,bP as _e,bO as ge}from"./arco.b02d9b55.js";import{u as fe}from"./loading.7f7bf96d.js";import{c as D}from"./cloneDeep.bb231cd9.js";import he from"./index.91907673.js";import{a as ve}from"./index.c4821ce7.js";import{I as F}from"./Icon.031e5930.js";import{h as be}from"./vue.e4c26cfd.js";import"./chart.67655b2c.js";import"./IconPicker.7129cb1a.js";function xe(v){return Q.get({url:"/project/approve/get_list",params:v},{errorMessageMode:"none"})}const ye=z(()=>[{title:"\u7F16\u53F7",dataIndex:"id",slotName:"id",width:50,align:"center"},{title:"\u7528\u6237",dataIndex:"name",slotName:"name",width:80,align:"center"},{title:"\u6587\u4EF6\u540D",dataIndex:"file_name",slotName:"file_name",width:120,align:"center"},{title:"\u53D1\u6587\u6570",dataIndex:"project_count",slotName:"project_count",width:50,align:"center"},{title:"\u4E0A\u4F20\u65F6\u95F4",dataIndex:"create_time",slotName:"create_time",width:120,align:"center"},{title:"\u5BA1\u6279\u72B6\u6001",dataIndex:"approve_status",slotName:"approve_status",width:80,align:"center"},{title:"\u5BA1\u6279\u65F6\u95F4",dataIndex:"approve_time",slotName:"approve_time",width:120,align:"center"},{title:"\u5BA1\u6279\u4EBA",dataIndex:"approve_uid",slotName:"approve_uid",width:100,align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",width:100,fixed:"right",align:"center"}]),Ce={class:"container"},we={key:0,style:{"padding-left":"5px",color:"var(--color-neutral-4)"}},ke=["alt","src"],Ie={key:0,style:{color:"gray"}},Ae={key:1,style:{color:"orangered"}},Be={key:2,style:{color:"black"}},De={name:"article"},Fe=ee({...De,setup(v){const b=be(),{t:g}=X(),[N,{openModal:M}]=ve();z(()=>[{name:g("searchTable.size.mini"),value:"mini"},{name:g("searchTable.size.small"),value:"small"},{name:g("searchTable.size.medium"),value:"medium"},{name:g("searchTable.size.large"),value:"large"}]);const n=te({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0});document.documentElement.clientHeight;const{loading:E,setLoading:x}=fe(!0),y=p([]),f=p([]),S=p([]);p("large");const C=()=>({id:"",name:"",status:"*"}),i=p(C()),u=async()=>{x(!0);try{const o=await xe({page:n.current,pageSize:n.pageSize,...i.value});y.value=o.items,n.current=o.page,n.total=o.total}catch{}finally{x(!1)}};ae(()=>{});const P=()=>{u()},V=()=>{i.value=C(),u()};u(),oe(()=>ye.value,o=>{f.value=D(o),f.value.forEach((r,w)=>{r.checked=!0}),S.value=D(f.value)},{deep:!0,immediate:!0});const T=async o=>{M(!0,{isUpdate:!1,record:o})},H=async()=>{u()},L=o=>{n.current=o,u()},O=o=>{n.pageSize=o,u()},Y=[{label:"\u5168\u90E8",value:"*"},{label:"\u901A\u8FC7",value:"1"},{label:"\u672A\u901A\u8FC7",value:"-1"},{label:"\u672A\u5BA1\u6279",value:"0"}];return(o,r)=>{const w=B("Breadcrumb"),j=se,R=le,k=ie,I=ue,$=B("icon-search"),A=re,U=ce,G=me,W=pe,q=de,J=_e,K=ge;return c(),m("div",Ce,[t(w,{items:[s(b).matched[0].meta.locale,s(b).meta.locale]},null,8,["items"]),t(K,{class:"general-card onelineCard",style:{height:"calc(100% - 50px)"}},{default:a(()=>[t(U,{style:{"margin-bottom":"10px"}},{default:a(()=>[t(I,{span:10},{default:a(()=>[t(k,null,{default:a(()=>[t(j,{style:{width:"220px"},modelValue:i.value.name,"onUpdate:modelValue":r[0]||(r[0]=e=>i.value.name=e),placeholder:"\u7528\u6237\u540D","allow-clear":""},{prefix:a(()=>[l(" \u7528\u6237: ")]),_:1},8,["modelValue"]),t(R,{options:Y,modelValue:i.value.status,"onUpdate:modelValue":r[1]||(r[1]=e=>i.value.status=e),style:{width:"200px"}},{prefix:a(()=>[l(" \u5BA1\u6279\u72B6\u6001: ")]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(I,{span:14,style:{"text-align":"right"}},{default:a(()=>[t(k,null,{default:a(()=>[t(A,{type:"primary",onClick:P},{icon:a(()=>[t($)]),default:a(()=>[l(" \u67E5\u8BE2 ")]),_:1}),t(A,{onClick:V},{default:a(()=>[l(d(o.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(J,{"row-key":"id",loading:s(E),pagination:n,columns:f.value,data:y.value,bordered:{wrapper:!0,cell:!0},size:"large",scroll:{x:800},"default-expand-all-rows":!0,ref:"artable",onPageChange:L,onPageSizeChange:O},{file_name:a(({record:e})=>[t(G,{href:e.url,status:"success",target:"_blank"},{default:a(()=>[l(d(e.file_name),1)]),_:2},1032,["href"])]),name:a(({record:e})=>[l(d(e.name),1),e.nickname?(c(),m("span",we,d(e.nickname),1)):_("",!0)]),mimetype:a(({record:e})=>[e.mimetype.includes("image")||e.mimetype.includes("video")?(c(),m("img",{key:0,alt:e.title,style:{height:"50px","border-radius":"5px"},src:e.mimetype.includes("image")?e.url:e.cover_url},null,8,ke)):_("",!0)]),approve_time:a(({record:e,column:h})=>[l(d(s(ne)(e[h.dataIndex]*1e3).format("YYYY-MM-DD HH:mm")),1)]),approve_status:a(({record:e})=>[e.approve_status==0?(c(),m("span",Ie,"\u672A\u5BA1\u6279")):_("",!0),e.approve_status==1?(c(),m("span",Ae,"\u901A\u8FC7")):_("",!0),e.approve_status==-1?(c(),m("span",Be,"\u4E0D\u901A\u8FC7")):_("",!0)]),operations:a(({record:e})=>[t(s(F),{icon:"svgfont-shenpi",class:"iconbtn",onClick:h=>T(e),size:18,color:"#0960bd"},null,8,["onClick"]),t(W,{direction:"vertical"}),t(q,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:h=>o.handleDel(e)},{default:a(()=>[t(s(F),{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data"])]),_:1}),t(he,{onRegister:s(N),onSuccess:H},null,8,["onRegister"])])}}});const nt=Z(Fe,[["__scopeId","data-v-ece9c55a"]]);export{nt as default};
