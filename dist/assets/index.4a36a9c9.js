import{u as be,_ as xe}from"./index.a2bf8911.js";/* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               */import{c as k,d as Ce,r as Be,e as g,o as ke,w as we,aL as f,C as h,D as x,aI as a,u as l,aH as n,aN as i,aO as r,G as B,aK as ze,aJ as Fe,aE as Se,E as De,aF as P,c0 as Ie,aS as _,aW as Te,cb as Ee,bM as Me,aY as Ve,bb as Ne,b_ as Pe,bv as Re,bw as Ue,bx as $e,c4 as Ae,aX as Le,bj as Oe,b$ as Ye,c6 as je,bP as Ge,bO as He}from"./arco.b02d9b55.js";import{u as Ke}from"./loading.7f7bf96d.js";import{c as R}from"./cloneDeep.bb231cd9.js";import{A as Je,g as We,u as Xe,d as qe}from"./AddForm.86419dec.js";import{a as U}from"./index.c4821ce7.js";import Qe from"./index.be0cc808.js";import{I as $}from"./Icon.031e5930.js";import{h as Ze}from"./vue.e4c26cfd.js";import"./chart.67655b2c.js";/* empty css               *//* empty css               */import"./lodash.b99388fa.js";import"./picturecate.1f8d9eeb.js";import"./IconPicker.7129cb1a.js";import"./AddForm.9fe74f0e.js";/* empty css                */const et=k(()=>[{title:"ID",dataIndex:"id",width:76,align:"center"},{title:"\u56FE\u7247",dataIndex:"mimetype",slotName:"mimetype",align:"center"},{title:"\u540D\u79F0",dataIndex:"title",align:"center"},{title:"\u7C7B\u578B",dataIndex:"type",slotName:"type",align:"center"},{title:"\u5206\u7C7B",dataIndex:"catename",align:"center"},{title:"\u5927\u5C0F",dataIndex:"filesize",slotName:"filesize",align:"center"},{title:"\u72B6\u6001",dataIndex:"status",slotName:"status",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createtime",slotName:"createtime",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",align:"center"}]),tt={class:"container"},at={class:"action-icon"},nt={key:0,style:{"padding-left":"5px",color:"var(--color-neutral-4)"}},ot=["alt","src"],st={name:"article"},lt=Ce({...st,setup(it){const w=Ze(),{t:v}=be(),[A,{openModal:z}]=U(),[L,{openModal:O}]=U(),Y=k(()=>[{name:v("searchTable.size.mini"),value:"mini"},{name:v("searchTable.size.small"),value:"small"},{name:v("searchTable.size.medium"),value:"medium"},{name:v("searchTable.size.large"),value:"large"}]),d=Be({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0});document.documentElement.clientHeight;const{loading:j,setLoading:F}=Ke(!0),S=g([]),y=g([]),G=g([]),C=g("large"),D=()=>({trade_no:"",title:"",name:"",createdTime:[],status:""}),u=g(D()),m=async()=>{F(!0);try{const e=await We({page:d.current,pageSize:d.pageSize,...u.value});S.value=e.items,d.current=e.page,d.total=e.total}catch{}finally{F(!1)}};ke(()=>{});const I=()=>{m()},H=()=>{u.value=D(),m()};m();const K=(e,o)=>{C.value=e};we(()=>et.value,e=>{y.value=R(e),y.value.forEach((o,s)=>{o.checked=!0}),G.value=R(y.value)},{deep:!0,immediate:!0});const J=()=>{O(!0,{isUpdate:!1,record:null})},W=()=>{z(!0,{isUpdate:!1,record:null})},X=async e=>{z(!0,{isUpdate:!0,record:e})},T=async()=>{m()},q=e=>{d.current=e,m()},Q=e=>{d.pageSize=e,m()},Z=async e=>{try{_.loading({content:"\u66F4\u65B0\u72B6\u6001\u4E2D",id:"upStatus"}),await Xe({id:e.id,status:e.status})&&_.success({content:"\u66F4\u65B0\u72B6\u6001\u6210\u529F",id:"upStatus"})}catch{_.clear("top")}},ee=async e=>{try{_.loading({content:"\u5220\u9664\u4E2D",id:"upStatus"}),await qe({ids:[e.id]})&&(m(),_.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus"}))}catch{_.clear("top")}},te=k(()=>[{label:"\u5168\u90E8",value:""},{label:"\u6B63\u5E38",value:0},{label:"\u9690\u85CF",value:1}]),ae=["B","KB","MB","GB","TB"],ne=e=>{const o=Math.floor(Math.log2(e)/10),s=oe(o,0,4);return(e/2**(10*s)).toFixed(2)+ae[s]};function oe(e,o,s){return e<o?o:e>s?s:e}const E=(e,o)=>{var s="",p="";return e==0?(s="\u7D20\u6750\u56FE",p="cyan"):e==1?(s="\u63D2\u56FE",p="blue"):e==2&&(s="\u516C\u5171",p="arcoblue"),o=="color"?p:s};return(e,o)=>{const s=f("Breadcrumb"),p=Te,se=Ee,le=Me,ie=f("icon-search"),b=Ve,M=Ne,V=Pe,ce=f("icon-plus"),ue=f("icon-refresh"),N=Re,re=f("icon-line-height"),de=Ue,me=$e,pe=Ae,_e=Le,ge=Oe,fe=Ye,he=je,ve=Ge,ye=He;return h(),x("div",tt,[a(s,{items:[l(w).matched[0].meta.locale,l(w).meta.locale]},null,8,["items"]),a(ye,{class:"general-card onelineCard",style:{height:"calc(100% - 50px)"}},{default:n(()=>[a(pe,{style:{"margin-bottom":"10px"}},{default:n(()=>[a(V,{span:16},{default:n(()=>[a(M,null,{default:n(()=>[a(p,{style:{width:"160px"},modelValue:u.value.title,"onUpdate:modelValue":o[0]||(o[0]=t=>u.value.title=t),placeholder:"\u540D\u79F0","allow-clear":""},null,8,["modelValue"]),a(se,{modelValue:u.value.createdTime,"onUpdate:modelValue":o[1]||(o[1]=t=>u.value.createdTime=t),style:{width:"200px"}},null,8,["modelValue"]),a(le,{modelValue:u.value.status,"onUpdate:modelValue":o[2]||(o[2]=t=>u.value.status=t),options:l(te),placeholder:"\u72B6\u6001",style:{width:"120px"}},null,8,["modelValue","options"]),a(b,{type:"primary",onClick:I},{icon:n(()=>[a(ie)]),default:n(()=>[i(" \u67E5\u8BE2 ")]),_:1}),a(b,{onClick:H},{default:n(()=>[i(r(e.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),_:1}),a(V,{span:8,style:{"text-align":"right"}},{default:n(()=>[a(M,null,{default:n(()=>[a(b,{type:"primary",onClick:W},{icon:n(()=>[a(ce)]),default:n(()=>[i(" "+r(e.$t("searchTable.operation.create")),1)]),_:1}),a(b,{onClick:J},{default:n(()=>[i("\u7BA1\u7406\u5206\u7C7B")]),_:1}),a(N,{content:e.$t("searchTable.actions.refresh")},{default:n(()=>[B("div",{class:"action-icon",onClick:I},[a(ue,{size:"18"})])]),_:1},8,["content"]),a(me,{onSelect:K},{content:n(()=>[(h(!0),x(ze,null,Fe(l(Y),t=>(h(),Se(de,{key:t.value,value:t.value,class:De({active:t.value===C.value})},{default:n(()=>[B("span",null,r(t.name),1)]),_:2},1032,["value","class"]))),128))]),default:n(()=>[a(N,{content:e.$t("searchTable.actions.density")},{default:n(()=>[B("div",at,[a(re,{size:"18"})])]),_:1},8,["content"])]),_:1})]),_:1})]),_:1})]),_:1}),a(ve,{"row-key":"id",loading:l(j),pagination:d,columns:y.value,data:S.value,bordered:{wrapper:!0,cell:!0},size:C.value,"default-expand-all-rows":!0,ref:"artable",onPageChange:q,onPageSizeChange:Q},{name:n(({record:t})=>[i(r(t.name),1),t.nickname?(h(),x("span",nt,r(t.nickname),1)):P("",!0)]),mimetype:n(({record:t})=>[t.mimetype.includes("image")||t.mimetype.includes("video")?(h(),x("img",{key:0,alt:t.title,style:{height:"50px","border-radius":"5px"},src:t.mimetype.includes("image")?t.url:t.cover_url},null,8,ot)):P("",!0)]),createtime:n(({record:t,column:c})=>[i(r(l(Ie)(t[c.dataIndex]*1e3).format("YYYY-MM-DD")),1)]),status:n(({record:t})=>[a(_e,{type:"round",modelValue:t.status,"onUpdate:modelValue":c=>t.status=c,"checked-value":0,"unchecked-value":1,onChange:c=>Z(t)},{checked:n(()=>[i(" \u5F00 ")]),unchecked:n(()=>[i(" \u5173 ")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),filesize:n(({record:t})=>[i(r(ne(t.filesize)),1)]),type:n(({record:t,column:c})=>[a(ge,{color:E(t[c.dataIndex],"color")},{default:n(()=>[i(r(E(t[c.dataIndex],"text")),1)]),_:2},1032,["color"])]),operations:n(({record:t})=>[a(l($),{icon:"svgfont-bianji1",class:"iconbtn",onClick:c=>X(t),size:18,color:"#0960bd"},null,8,["onClick"]),a(fe,{direction:"vertical"}),a(he,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:c=>ee(t)},{default:n(()=>[a(l($),{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size"])]),_:1}),a(Je,{onRegister:l(A),onSuccess:T},null,8,["onRegister"]),a(Qe,{onRegister:l(L),onSuccess:T},null,8,["onRegister"])])}}});const Gt=xe(lt,[["__scopeId","data-v-80a2ec81"]]);export{Gt as default};
