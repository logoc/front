import{n as P,u as ie,_ as ue}from"./index.a2bf8911.js";/* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               */import{c as C,d as re,aY as M,r as ce,e as d,w as me,aL as f,C as h,D as y,aI as a,u as r,aH as n,aN as m,aO as p,G as x,aK as de,aJ as pe,aE as _e,E as ge,aF as fe,c0 as he,aS as z,aW as ve,cb as be,bM as ye,bb as xe,b_ as ze,bv as Ce,bw as we,bx as Be,c4 as Te,c6 as Ee,bP as De,bO as Fe}from"./arco.b02d9b55.js";import{u as Se}from"./loading.7f7bf96d.js";import{c as V}from"./cloneDeep.bb231cd9.js";import{l as ke}from"./lodash.b99388fa.js";import{h as Ie}from"./vue.e4c26cfd.js";import"./chart.67655b2c.js";const Me=C(()=>[{title:"ID",dataIndex:"id",align:"center",width:70},{title:"\u56FE\u7247",dataIndex:"mimetype",slotName:"mimetype",align:"center"},{title:"\u6587\u4EF6\u540D\u79F0",dataIndex:"title",align:"center"},{title:"\u6587\u4EF6\u5927\u5C0F",dataIndex:"filesize",slotName:"filesize",align:"center"},{title:"mime\u7C7B\u578B",dataIndex:"mimetype",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"uploadtime",slotName:"createtime",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",align:"center"}]);function Ve(i){return i.createdTime&&(i.createdTime=ke.exports.join(i.createdTime)),P.get({url:"/matter/attachment/get_list",params:i},{errorMessageMode:"none"})}function Pe(i){return P.delete({url:"/matter/attachment/del",params:i},{errorMessageMode:"message"})}const Ne={class:"container"},Le={class:"action-icon"},Oe=["alt","src"],Ye={name:"Rule"},Ge=re({...Ye,setup(i){const w=Ie(),N=M.Group,{t:_}=ie(),L=C(()=>[{name:_("searchTable.size.mini"),value:"mini"},{name:_("searchTable.size.small"),value:"small"},{name:_("searchTable.size.medium"),value:"medium"},{name:_("searchTable.size.large"),value:"large"}]),u=ce({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0});document.documentElement.clientHeight;const{loading:O,setLoading:B}=Se(!0),T=d([]),g=d([]),Y=d([]),v=d("large"),E=()=>({trade_no:"",name:"",createdTime:[],status:""}),l=d(E()),c=async()=>{B(!0);try{const t=await Ve({page:u.current,pageSize:u.pageSize,...l.value});T.value=t.items,u.current=t.page,u.total=t.total}catch{}finally{B(!1)}},D=()=>{c()},G=()=>{l.value=E(),c()};c();const R=(t,o)=>{v.value=t};me(()=>Me.value,t=>{g.value=V(t),g.value.forEach((o,s)=>{o.checked=!0}),Y.value=V(g.value)},{deep:!0,immediate:!0});const $=t=>{u.current=t,c()},A=t=>{u.pageSize=t,c()},H=async t=>{try{z.loading({content:"\u5220\u9664\u4E2D",id:"upStatus"}),await Pe({ids:t})&&(c(),z.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus"}))}catch{z.clear("top")}},U=C(()=>[{label:"\u5168\u90E8",value:""},{label:"\u6B63\u5E38",value:0},{label:"\u7981\u7528",value:1}]),j=["B","KB","MB","GB","TB"],K=t=>{const o=Math.floor(Math.log2(t)/10),s=J(o,0,4);return(t/2**(10*s)).toFixed(2)+j[s]};function J(t,o,s){return t<o?o:t>s?s:t}return(t,o)=>{const s=f("Breadcrumb"),W=ve,q=be,Q=ye,X=f("icon-search"),b=M,F=xe,S=ze,Z=f("icon-refresh"),k=Ce,ee=f("icon-line-height"),te=we,ae=Be,ne=Te,oe=Ee,le=De,se=Fe;return h(),y("div",Ne,[a(s,{items:[r(w).matched[0].meta.locale,r(w).meta.locale]},null,8,["items"]),a(se,{class:"general-card onelineCard",style:{height:"calc(100% - 50px)"}},{default:n(()=>[a(ne,{style:{"margin-bottom":"10px"}},{default:n(()=>[a(S,{span:16},{default:n(()=>[a(F,null,{default:n(()=>[a(W,{style:{width:"220px"},modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=e=>l.value.name=e),placeholder:"\u6807\u9898","allow-clear":""},null,8,["modelValue"]),a(q,{modelValue:l.value.createdTime,"onUpdate:modelValue":o[1]||(o[1]=e=>l.value.createdTime=e),style:{width:"230px"}},null,8,["modelValue"]),a(Q,{modelValue:l.value.status,"onUpdate:modelValue":o[2]||(o[2]=e=>l.value.status=e),options:r(U),placeholder:"\u72B6\u6001",style:{width:"120px"}},null,8,["modelValue","options"]),a(b,{type:"primary",onClick:D},{icon:n(()=>[a(X)]),default:n(()=>[m(" \u67E5\u8BE2 ")]),_:1}),a(b,{onClick:G},{default:n(()=>[m(p(t.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),_:1}),a(S,{span:8,style:{"text-align":"right"}},{default:n(()=>[a(F,null,{default:n(()=>[a(k,{content:t.$t("searchTable.actions.refresh")},{default:n(()=>[x("div",{class:"action-icon",onClick:D},[a(Z,{size:"18"})])]),_:1},8,["content"]),a(ae,{onSelect:R},{content:n(()=>[(h(!0),y(de,null,pe(r(L),e=>(h(),_e(te,{key:e.value,value:e.value,class:ge({active:e.value===v.value})},{default:n(()=>[x("span",null,p(e.name),1)]),_:2},1032,["value","class"]))),128))]),default:n(()=>[a(k,{content:t.$t("searchTable.actions.density")},{default:n(()=>[x("div",Le,[a(ee,{size:"18"})])]),_:1},8,["content"])]),_:1})]),_:1})]),_:1})]),_:1}),a(le,{"row-key":"id",loading:r(O),pagination:u,columns:g.value,data:T.value,bordered:{wrapper:!0,cell:!0},size:v.value,"default-expand-all-rows":!0,ref:"artable",onPageChange:$,onPageSizeChange:A},{mimetype:n(({record:e})=>[e.mimetype.includes("image")||e.mimetype.includes("video")?(h(),y("img",{key:0,alt:e.title,style:{height:"50px","border-radius":"5px"},src:e.mimetype.includes("image")?e.url:e.cover_url},null,8,Oe)):fe("",!0)]),createtime:n(({record:e,column:I})=>[m(p(r(he)(e[I.dataIndex]*1e3).format("YYYY-MM-DD")),1)]),overtime:n(({record:e})=>[m(p(e.overtime==0?"\u4E0D\u9650":e.overtime),1)]),filesize:n(({record:e})=>[m(p(K(e.filesize)),1)]),operations:n(({record:e})=>[a(r(N),{size:"small"},{default:n(()=>[a(oe,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u9644\u4EF6\u5417?",onOk:I=>H([e.id])},{default:n(()=>[a(b,{style:{color:"red"}},{default:n(()=>[m("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1},8,["loading","pagination","columns","data","size"])]),_:1})])}}});const pt=ue(Ge,[["__scopeId","data-v-47051e3e"]]);export{pt as default};
