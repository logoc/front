import{_ as E}from"./index.a2bf8911.js";/* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{c as $,d as H,e as r,u as T,r as U,c0 as A,aS as c,aL as h,C as N,aE as R,aH as o,G as V,F as L,aI as t,aN as d,aO as I,bU as Y,aW as j,cb as O,aY as G,bb as W,b_ as X,c4 as q,aX as J,b$ as K,c6 as Q,bP as Z}from"./arco.b02d9b55.js";import{B as x,u as ee}from"./index.c4821ce7.js";import{u as ae}from"./loading.7f7bf96d.js";import{a as te,u as oe,d as ne}from"./api.94877843.js";import{I as se}from"./IconPicker.7129cb1a.js";import{I as ie}from"./Icon.031e5930.js";import le from"./AddForm.3d18e9ac.js";import"./chart.67655b2c.js";import"./vue.e4c26cfd.js";/* empty css               *//* empty css                */const re=$(()=>[{title:"ID",dataIndex:"id",width:80,align:"center"},{title:"\u540D\u79F0",dataIndex:"name",align:"center"},{title:"\u63CF\u8FF0",dataIndex:"des",align:"center"},{title:"\u72B6\u6001",dataIndex:"status",slotName:"status",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createtime",slotName:"createtime",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",align:"center"}]),ce=H({name:"cateindex",components:{BasicModal:x,IconPicker:se,Icon:ie,AddForm:le},emits:["success"],setup(e,{emit:u}){const C=r(!1),P=r(620),y=r(620),b=r([]),{loading:S,setLoading:f}=ae(!0),[v,{setModalProps:m,closeModal:F}]=ee(async a=>{m({confirmLoading:!1}),C.value=!!(a!=null&&a.isUpdate),i()}),p=()=>({title:"",name:"",createdTime:[],status:""}),g=r(p()),i=async()=>{f(!0);try{const a=await te({page:s.current,pageSize:s.pageSize,...g.value});b.value=a.items,s.current=a.page,s.total=a.total}catch{}finally{f(!1)}},w=$(()=>T(C)?"\u7F16\u8F91\u6570\u636E":"\u5206\u7C7B\u7BA1\u7406"),_=a=>{y.value=a},s=U({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0}),k=a=>{s.current=a,i()},M=a=>{s.pageSize=a,i()},B=async a=>{try{c.loading({content:"\u66F4\u65B0\u72B6\u6001\u4E2D",id:"upStatus"}),await oe({id:a.id,status:a.status})&&c.success({content:"\u66F4\u65B0\u72B6\u6001\u6210\u529F",id:"upStatus"})}catch{c.clear("top")}},n=async a=>{try{c.loading({content:"\u5220\u9664\u4E2D",id:"upStatus"}),await ne({ids:[a.id]})&&(i(),c.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus"}))}catch{c.clear("top")}},l=r();return{registerModal:v,getTitle:w,columns:re,loading:S,dayjs:A,modelHeight:P,onHeightChange:_,windHeight:y,pagination:s,handlePaageChange:k,handlePaageSizeChange:M,handleStatus:B,handleDel:n,handleEdit:async a=>{l.value.ShowModal({isUpdate:!0,record:a})},renderData:b,formModel:g,search:()=>{i()},reset:()=>{g.value=p(),i()},createData:async()=>{l.value.ShowModal({isUpdate:!1,record:null})},addFormRef:l}}});const de={class:"table-content"};function ue(e,u,C,P,y,b){const S=j,f=O,v=h("icon-search"),m=G,F=W,p=X,g=h("icon-plus"),i=q,w=J,_=h("Icon"),z=K,s=Q,k=Z,M=h("AddForm"),B=h("BasicModal");return N(),R(B,Y(e.$attrs,{onRegister:e.registerModal,isPadding:!1,footer:!1,loading:e.loading,width:"1000px",onHeightChange:e.onHeightChange,minHeight:e.modelHeight,title:e.getTitle}),{default:o(()=>[V("div",{class:"modalbox",style:L({"min-height":`${e.windHeight}px`})},[V("div",de,[t(i,{style:{"margin-bottom":"10px"}},{default:o(()=>[t(p,{span:16},{default:o(()=>[t(F,null,{default:o(()=>[t(S,{style:{width:"160px"},modelValue:e.formModel.name,"onUpdate:modelValue":u[0]||(u[0]=n=>e.formModel.name=n),placeholder:"\u540D\u79F0","allow-clear":""},null,8,["modelValue"]),t(f,{modelValue:e.formModel.createdTime,"onUpdate:modelValue":u[1]||(u[1]=n=>e.formModel.createdTime=n),style:{width:"200px"}},null,8,["modelValue"]),t(m,{type:"primary",onClick:e.search},{icon:o(()=>[t(v)]),default:o(()=>[d(" \u67E5\u8BE2 ")]),_:1},8,["onClick"]),t(m,{onClick:e.reset},{default:o(()=>[d(I(e.$t("searchTable.form.reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),t(p,{span:8,style:{"text-align":"right"}},{default:o(()=>[t(F,null,{default:o(()=>[t(m,{type:"primary",onClick:e.createData},{icon:o(()=>[t(g)]),default:o(()=>[d(" "+I(e.$t("searchTable.operation.create")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),t(k,{"row-key":"id",loading:e.loading,pagination:e.pagination,columns:e.columns,data:e.renderData,bordered:{wrapper:!0,cell:!0},size:"medium","default-expand-all-rows":!0,ref:"artable",onPageChange:e.handlePaageChange,onPageSizeChange:e.handlePaageSizeChange},{createtime:o(({record:n})=>[d(I(e.dayjs(n.createtime*1e3).format("YYYY-MM-DD")),1)]),status:o(({record:n})=>[t(w,{type:"round",modelValue:n.status,"onUpdate:modelValue":l=>n.status=l,"checked-value":0,"unchecked-value":1,onChange:l=>e.handleStatus(n)},{checked:o(()=>[d(" \u5F00 ")]),unchecked:o(()=>[d(" \u5173 ")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),operations:o(({record:n})=>[t(_,{icon:"svgfont-bianji1",class:"iconbtn",onClick:l=>e.handleEdit(n),size:18,color:"#0960bd"},null,8,["onClick"]),t(z,{direction:"vertical"}),t(s,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:l=>e.handleDel(n)},{default:o(()=>[t(_,{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","onPageChange","onPageSizeChange"])])],4),t(M,{ref:"addFormRef",onSuccess:e.search},null,8,["onSuccess"])]),_:1},16,["onRegister","loading","onHeightChange","minHeight","title"])}const Ge=E(ce,[["render",ue],["__scopeId","data-v-0df0b3e0"]]);export{Ge as default};
