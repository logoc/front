import{n as B,p as M,_ as x}from"./index.a2bf8911.js";/* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{c as E,d as N,e as c,r as A,c0 as k,aS as g,aL as P,C as S,aE as V,aH as o,G as v,F as D,aI as n,aN as i,aO as z,bU as H,aW as j,bb as $,b_ as L,c4 as U,b9 as T,ce as R,aY as G,ba as O,bP as W}from"./arco.b02d9b55.js";import{B as Y,u as q}from"./index.c4821ce7.js";import{u as J}from"./loading.7f7bf96d.js";import{I as K}from"./IconPicker.7129cb1a.js";import{I as Q}from"./Icon.031e5930.js";import"./chart.67655b2c.js";import"./vue.e4c26cfd.js";const X=E(()=>[{title:"ID",dataIndex:"id",slotName:"id",width:80,align:"center"},{title:"\u5408\u4F5C\u5E73\u53F0",dataIndex:"platform",slotName:"platform",width:100,fixed:"left",align:"center"},{title:"\u5408\u4F5C\u65F6\u95F4",dataIndex:"cooperate_time",slotName:"cooperate_time",width:120,align:"center"},{title:"\u8D26\u53F7\u7C7B\u578B",dataIndex:"account_type",slotName:"account_type",width:100,align:"center"},{title:"\u8D26\u53F7\u6635\u79F0",dataIndex:"account_nikename",slotName:"account_nikename",tooltip:{position:"left"},ellipsis:!0,width:160,align:"center"},{title:"\u7C89\u4E1D\u6570(\u4E07)",dataIndex:"fanscnt",slotName:"fanscnt",width:100,align:"center"},{title:"\u53D1\u5E03\u94FE\u63A5",dataIndex:"publish_link",slotName:"publish_link",ellipsis:!0,tooltip:{position:"left"},width:150,align:"center"},{title:"\u5408\u4F5C\u5F62\u5F0F",dataIndex:"cooperate_type",slotName:"cooperate_type",width:120,align:"center"},{title:"\u5E73\u53F0\u4EF7/\u520A\u4F8B",dataIndex:"platform_price",slotName:"platform_price",width:120,align:"center"},{title:"\u6267\u884C\u4EF7\uFF08\u542B\u7A0E\uFF09",dataIndex:"actual_price",slotName:"actual_price",width:150,align:"center"},{title:"\u6298\u6263\u8BF4\u660E",dataIndex:"discount_note",slotName:"discount_note",width:100,align:"center"},{title:"\u7A0E\u7387",dataIndex:"tax_rate",slotName:"tax_rate",width:120,align:"center"},{title:"\u4E8B\u4E1A\u90E8",dataIndex:"department",slotName:"department",width:120,align:"center"},{title:"\u9879\u76EE\u53F7",dataIndex:"projectno",slotName:"projectno",ellipsis:!0,tooltip:!0,width:160,align:"center"},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"project_name",slotName:"project_name",tooltip:!0,ellipsis:!0,width:180,align:"center"},{title:"\u652F\u4ED8\u5355\u53F7",dataIndex:"payno",slotName:"payno",ellipsis:!0,tooltip:{position:"left"},width:160,align:"center"},{title:"\u4F9B\u5E94\u5546\u540D\u79F0",dataIndex:"supply_name",slotName:"supply_name",ellipsis:!0,tooltip:{position:"left"},width:160,align:"center"},{title:"\u8054\u7CFB\u65B9\u5F0F",dataIndex:"contact",slotName:"contact",ellipsis:!0,tooltip:{position:"left"},width:160,align:"center"}]);function Z(e){return B.post({url:"/project/approve/save",params:e},{errorMessageMode:"none"})}function ee(e){return B.get({url:"/project/project/get_list",params:e},{errorMessageMode:"none"})}const te=N({name:"cateindex",components:{BasicModal:Y,IconPicker:K,Icon:Q},emits:["success"],setup(e,{emit:l}){const w=c(620),_=c(620),f=c([]),{loading:C,setLoading:s}=J(!0),u=c((()=>({id:0,name:"1221",file_name:"1212",project_count:"11",approve_status:0,status:["-1","1"],approve_note:"\u901A\u8FC7"}))()),[p,{setModalProps:m,closeModal:y}]=q(async a=>{m({confirmLoading:!1}),u.value=M(a.record),a.record.approve_status!=0&&(u.value.status=[a.record.approve_status.toString()]),r()}),r=async()=>{s(!0);try{const a=await ee({page:t.current,pageSize:t.pageSize,...u.value});f.value=a.items,t.current=a.page,t.total=a.total}catch{}finally{s(!1)}},h=E(()=>"Excel\u9884\u89C8\u5BA1\u6279"),F=a=>{_.value=a},t=A({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0});return{registerModal:p,getTitle:h,columns:X,loading:C,formModel:u,dayjs:k,modelHeight:w,handleApprove:async a=>{try{a.status==null||a.status.length<=0?(console.log("\u8BF7\u52FE\u9009"),g.error({content:"\u8BF7\u52FE\u9009\u5BA1\u6279\u72B6\u6001\uFF01",id:"upStatus"})):await Z({id:a.id,status:a.status,note:a.approve_note})&&(r(),g.success({content:"\u5BA1\u6279\u6210\u529F",id:"upStatus"}))}catch{g.error({content:"\u5BA1\u6279\u5931\u8D25",id:"upStatus"}),g.clear("top")}},onHeightChange:F,windHeight:_,pagination:t,handlePaageChange:a=>{t.current=a,r()},handlePaageSizeChange:a=>{t.pageSize=a,r()},renderData:f}}});const ae={class:"table-content"};function oe(e,l,w,_,f,C){const s=j,d=$,u=L,p=U,m=T,y=R,r=G,h=O,F=W,b=P("BasicModal");return S(),V(b,H(e.$attrs,{onRegister:e.registerModal,isPadding:!1,footer:!1,loading:e.loading,width:"1000px",onHeightChange:e.onHeightChange,minHeight:e.modelHeight,title:e.getTitle}),{default:o(()=>[v("div",{class:"modalbox",style:D({"min-height":`${e.windHeight}px`})},[v("div",ae,[n(p,{style:{"margin-bottom":"10px"}},{default:o(()=>[n(u,{span:24},{default:o(()=>[n(d,null,{default:o(()=>[n(s,{style:{width:"300px"},modelValue:e.formModel.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.formModel.name=t),readonly:""},{prepend:o(()=>[i(" \u4E0A\u4F20\u7528\u6237: ")]),_:1},8,["modelValue"]),n(s,{style:{width:"300px",color:"black"},modelValue:e.formModel.file_name,"onUpdate:modelValue":l[1]||(l[1]=t=>e.formModel.file_name=t),readonly:""},{prepend:o(()=>[i(" \u6587\u4EF6\u540D\u79F0: ")]),_:1},8,["modelValue"]),n(s,{style:{width:"300px",color:"red"},modelValue:e.formModel.project_count,"onUpdate:modelValue":l[2]||(l[2]=t=>e.formModel.project_count=t),readonly:""},{prepend:o(()=>[i(" \u53D1\u6587\u6570: ")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(p,{style:{"margin-bottom":"10px"}},{default:o(()=>[n(u,{span:18},{default:o(()=>[n(d,null,{default:o(()=>[n(y,{max:1,modelValue:e.formModel.status,"onUpdate:modelValue":l[3]||(l[3]=t=>e.formModel.status=t)},{default:o(()=>[n(m,{value:"1"},{default:o(()=>[i("\u5BA1\u6279\u901A\u8FC7")]),_:1}),n(m,{value:"-1"},{default:o(()=>[i("\u5BA1\u6279\u4E0D\u901A\u8FC7")]),_:1})]),_:1},8,["modelValue"]),n(s,{style:{width:"420px"},"default-value":"\u901A\u8FC7",modelValue:e.formModel.approve_note,"onUpdate:modelValue":l[4]||(l[4]=t=>e.formModel.approve_note=t),"allow-clear":""},{prepend:o(()=>[i(" \u5BA1\u6279\u4FE1\u606F: ")]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(u,{span:6,style:{"text-align":"right"}},{default:o(()=>[n(d,null,{default:o(()=>[n(r,{type:"primary",onClick:l[5]||(l[5]=t=>e.handleApprove(e.formModel))},{default:o(()=>[i(" \u5BA1\u6279 ")]),_:1})]),_:1})]),_:1})]),_:1}),n(F,{"row-key":"id",loading:e.loading,pagination:e.pagination,columns:e.columns,data:e.renderData,bordered:{wrapper:!0,cell:!0},size:"medium","default-expand-all-rows":!0,ref:"artable",onPageChange:e.handlePaageChange,onPageSizeChange:e.handlePaageSizeChange},{publish_link:o(({record:t})=>[n(h,{href:t.publish_link,status:"success",target:"_blank"},{default:o(()=>[i(z(t.publish_link),1)]),_:2},1032,["href"])]),_:1},8,["loading","pagination","columns","data","onPageChange","onPageSizeChange"])])],4)]),_:1},16,["onRegister","loading","onHeightChange","minHeight","title"])}const Ne=x(te,[["render",oe],["__scopeId","data-v-625c3b14"]]);export{Ne as default};
