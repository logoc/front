import{f as xe,m as Le,T as Ie,O as Ae,a as Me,p as pe,V as ye,W as be,n as Ce,_ as ze}from"./index.a2bf8911.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css                *//* empty css              *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               */import{d as fe,e as z,w as Ne,n as _e,a as $e,u as ke,o as Oe,z as Re,C as he,D as Fe,c as qe,aI as p,x as Ge,aP as He,aE as Ue,aY as je,r as Je,c0 as We,aS as W,aL as ee,aH as b,G as d,aN as P,aO as M,F as me,cc as Ke,aW as Ye,bb as Qe,b_ as Ze,c4 as Xe,b$ as et,c6 as tt,bP as at,bL as nt,bM as ot,bz as ut,bO as lt,b2 as rt,b3 as st}from"./arco.b02d9b55.js";import{u as it}from"./loading.7f7bf96d.js";import{I as ct}from"./Icon.031e5930.js";import{l as Ve,n as dt,t as pt,u as mt}from"./vue.e4c26cfd.js";import{G as ft,c as ht,g as vt}from"./GroupForm.ed8334c5.js";import{g as gt,e as yt,f as bt,h as Ct,i as wt}from"./devapi.0e5791d2.js";import{a as we}from"./index.c4821ce7.js";import _t from"./AddForm.e614c9ac.js";import kt from"./FieldModal.264d55a0.js";import{C as Ft}from"./htmlmixed.af7c8595.js";import"./chart.67655b2c.js";/* empty css               */import"./IconPicker.7129cb1a.js";/* empty css                */import"./generatecode.4bd8b8fc.js";function St(t,v=150,N){let A=()=>{t()};A=Ve(A,v);const g=()=>{N&&N.immediate&&A(),window.addEventListener("resize",A)},V=()=>{window.removeEventListener("resize",A)};return dt(()=>{g()}),pt(()=>{V()}),[g,V]}var oe=(t=>(t.JSON="application/json",t.HTML="htmlmixed",t.JS="javascript",t))(oe||{});const Bt=fe({__name:"CodeMirror",props:{mode:{type:String,default:oe.JSON,validator(t){return Object.values(oe).includes(t)}},value:{type:String,default:""},readonly:{type:Boolean,default:!1}},emits:["change"],setup(t,{emit:v}){const N=t,A=z();let f;const g=Ve(B,100),V=xe();Ne(()=>N.value,async F=>{await _e();const r=f==null?void 0:f.getValue();F!==r&&(f==null||f.setValue(F||""))},{flush:"post"}),Ne(()=>V.getTheme,async F=>{y()},{flush:"post"}),$e(()=>{f==null||f.setOption("mode",N.mode)});function y(){var F;(F=ke(f))==null||F.setOption("theme",V.getTheme=="light"?"idea":"material-palenight")}function B(){f==null||f.refresh()}async function C(){const F={autoCloseBrackets:!0,autoCloseTags:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers"]};f=Ft(A.value,{value:"",mode:N.mode,readOnly:N.readonly,tabSize:2,theme:"material-palenight",lineWrapping:!0,lineNumbers:!0,...F}),f==null||f.setValue(N.value),y(),f==null||f.on("change",()=>{v("change",f==null?void 0:f.getValue())})}return Oe(async()=>{await _e(),C(),St(g)}),Re(()=>{f=null}),(F,r)=>(he(),Fe("div",{class:"relative !h-full w-full overflow-hidden",style:{height:"100%"},ref_key:"el",ref:A},null,512))}}),Et={class:"h-full",style:{height:"100%"}},Dt=fe({__name:"CodeEditor",props:{value:{type:[Object,String]},mode:{type:String,default:oe.JSON,validator(t){return Object.values(oe).includes(t)}},readonly:{type:Boolean},autoFormat:{type:Boolean,default:!0}},emits:["change","update:value","format-error"],setup(t,{emit:v}){const N=t,A=qe(()=>{const{value:g,mode:V,autoFormat:y}=N;if(!y||V!==oe.JSON)return g;let B=g;if(Le(g))try{B=JSON.parse(g)}catch{return v("format-error",g),g}return JSON.stringify(B,null,2)});function f(g){v("update:value",g),v("change",g)}return(g,V)=>(he(),Fe("div",Et,[p(Bt,{value:ke(A),onChange:f,mode:t.mode,readonly:t.readonly},null,8,["value","mode","readonly"])]))}});var Pe={exports:{}};(function(t,v){(function(N,A){t.exports=A(Ie)})(Ge,function(N){return function(){var A={789:function(y){y.exports=N}},f={};function g(y){var B=f[y];if(B!==void 0)return B.exports;var C=f[y]={exports:{}};return A[y](C,C.exports,g),C.exports}g.d=function(y,B){for(var C in B)g.o(B,C)&&!g.o(y,C)&&Object.defineProperty(y,C,{enumerable:!0,get:B[C]})},g.o=function(y,B){return Object.prototype.hasOwnProperty.call(y,B)},g.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})};var V={};return function(){function y(e,a){(a==null||a>e.length)&&(a=e.length);for(var n=0,c=new Array(a);n<a;n++)c[n]=e[n];return c}function B(e,a){if(e){if(typeof e=="string")return y(e,a);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,a):void 0}}function C(e){return function(a){if(Array.isArray(a))return y(a)}(e)||function(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}(e)||B(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function F(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}g.r(V),g.d(V,{default:function(){return ie}});var r=g(789),re=(0,r.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var e=this.data,a=this.onClick;return(0,r.createVNode)("span",{class:"vjs-tree-brackets",onClick:a},[e])}}),m=(0,r.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(e,a){var n=a.emit;return{uiType:(0,r.computed)(function(){return e.isMultiple?"checkbox":"radio"}),model:(0,r.computed)({get:function(){return e.checked},set:function(c){return n("update:modelValue",c)}})}},render:function(){var e=this.uiType,a=this.model,n=this.$emit;return(0,r.createVNode)("label",{class:["vjs-check-controller",a?"is-checked":""],onClick:function(c){return c.stopPropagation()}},[(0,r.createVNode)("span",{class:"vjs-check-controller-inner is-".concat(e)},null),(0,r.createVNode)("input",{checked:a,class:"vjs-check-controller-original is-".concat(e),type:e,onChange:function(){return n("change",a)}},null)])}}),Z=(0,r.defineComponent)({props:{nodeType:{required:!0,type:String},onClick:Function},render:function(){var e=this.nodeType,a=this.onClick,n=e==="objectStart"||e==="arrayStart";return n||e==="objectCollapsed"||e==="arrayCollapsed"?(0,r.createVNode)("span",{class:"vjs-carets vjs-carets-".concat(n?"open":"close"),onClick:a},[(0,r.createVNode)("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},[(0,r.createVNode)("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"},null)])]):null}});function i(e){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i(e)}function se(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function O(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"root",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,D=c||{},w=D.key,E=D.index,G=D.type,T=G===void 0?"content":G,I=D.showComma,H=I!==void 0&&I,U=D.length,X=U===void 0?1:U,o=se(e);if(o==="array"){var h=te(e.map(function(x,u,l){return O(x,"".concat(a,"[").concat(u,"]"),n+1,{index:u,showComma:u!==l.length-1,length:X,type:T})}));return[O("[",a,n,{showComma:!1,key:w,length:e.length,type:"arrayStart"})[0]].concat(h,O("]",a,n,{showComma:H,length:e.length,type:"arrayEnd"})[0])}if(o==="object"){var _=Object.keys(e),J=te(_.map(function(x,u,l){return O(e[x],/^[a-zA-Z_]\w*$/.test(x)?"".concat(a,".").concat(x):"".concat(a,'["').concat(x,'"]'),n+1,{key:x,showComma:u!==l.length-1,length:X,type:T})}));return[O("{",a,n,{showComma:!1,key:w,index:E,length:_.length,type:"objectStart"})[0]].concat(J,O("}",a,n,{showComma:H,length:_.length,type:"objectEnd"})[0])}return[{content:e,level:n,key:w,index:E,path:a,showComma:H,length:X,type:T}]}function te(e){if(typeof Array.prototype.flat=="function")return e.flat();for(var a=C(e),n=[];a.length;){var c=a.shift();Array.isArray(c)?a.unshift.apply(a,C(c)):n.push(c)}return n}function $(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(e==null)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(i(e)!=="object")return e;if(a.get(e))return a.get(e);if(Array.isArray(e)){var n=e.map(function(w){return $(w,a)});return a.set(e,n),n}var c={};for(var D in e)c[D]=$(e[D],a);return a.set(e,c),c}function ae(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);a&&(c=c.filter(function(D){return Object.getOwnPropertyDescriptor(e,D).enumerable})),n.push.apply(n,c)}return n}function ue(e){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?ae(Object(n),!0).forEach(function(c){F(e,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(n,c))})}return e}var R={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},renderNodeKey:Function,renderNodeValue:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"},onNodeClick:{type:Function},onBracketsClick:{type:Function},onIconClick:{type:Function},onValueChange:{type:Function}},ne=(0,r.defineComponent)({name:"TreeNode",props:ue(ue({},R),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,style:Object,onSelectedChange:{type:Function}}),emits:["nodeClick","bracketsClick","iconClick","selectedChange","valueChange"],setup:function(e,a){var n=a.emit,c=(0,r.computed)(function(){return se(e.node.content)}),D=(0,r.computed)(function(){return"vjs-value vjs-value-".concat(c.value)}),w=(0,r.computed)(function(){return e.showDoubleQuotes?'"'.concat(e.node.key,'"'):e.node.key}),E=(0,r.computed)(function(){return e.selectableType==="multiple"}),G=(0,r.computed)(function(){return e.selectableType==="single"}),T=(0,r.computed)(function(){return e.nodeSelectable(e.node)&&(E.value||G.value)}),I=(0,r.reactive)({editing:!1}),H=function(u){var l,s,k=(s=(l=u.target)===null||l===void 0?void 0:l.value)==="null"?null:s==="undefined"?void 0:s==="true"||s!=="false"&&(s[0]+s[s.length-1]==='""'||s[0]+s[s.length-1]==="''"?s.slice(1,-1):typeof Number(s)=="number"&&!isNaN(Number(s))||s==="NaN"?Number(s):s);n("valueChange",k,e.node.path)},U=(0,r.computed)(function(){var u,l=(u=e.node)===null||u===void 0?void 0:u.content;return l===null?l="null":l===void 0&&(l="undefined"),c.value==="string"?'"'.concat(l,'"'):l+""}),X=function(){var u=e.renderNodeValue;return u?u({node:e.node,defaultValue:U.value}):U.value},o=function(){n("bracketsClick",!e.collapsed,e.node.path)},h=function(){n("iconClick",!e.collapsed,e.node.path)},_=function(){n("selectedChange",e.node)},J=function(){n("nodeClick",e.node),T.value&&e.selectOnClickNode&&n("selectedChange",e.node)},x=function(u){if(e.editable&&!I.editing){I.editing=!0;var l=function s(k){var S;k.target!==u.target&&((S=k.target)===null||S===void 0?void 0:S.parentElement)!==u.target&&(I.editing=!1,document.removeEventListener("click",s))};document.removeEventListener("click",l),document.addEventListener("click",l)}};return function(){var u,l=e.node;return(0,r.createVNode)("div",{class:{"vjs-tree-node":!0,"has-selector":e.showSelectController,"has-carets":e.showIcon,"is-highlight":e.highlightSelectedNode&&e.checked},onClick:J,style:e.style},[e.showLineNumber&&(0,r.createVNode)("span",{class:"vjs-node-index"},[l.id+1]),e.showSelectController&&T.value&&l.type!=="objectEnd"&&l.type!=="arrayEnd"&&(0,r.createVNode)(m,{isMultiple:E.value,checked:e.checked,onChange:_},null),(0,r.createVNode)("div",{class:"vjs-indent"},[Array.from(Array(l.level)).map(function(s,k){return(0,r.createVNode)("div",{key:k,class:{"vjs-indent-unit":!0,"has-line":e.showLine}},null)}),e.showIcon&&(0,r.createVNode)(Z,{nodeType:l.type,onClick:h},null)]),l.key&&(0,r.createVNode)("span",{class:"vjs-key"},[(u=e.renderNodeKey,u?u({node:e.node,defaultKey:w.value||""}):w.value),(0,r.createVNode)("span",null,[(0,r.createTextVNode)(":")])]),(0,r.createVNode)("span",null,[l.type!=="content"&&l.content?(0,r.createVNode)(re,{data:l.content.toString(),onClick:o},null):(0,r.createVNode)("span",{class:D.value,onClick:!e.editable||e.editableTrigger&&e.editableTrigger!=="click"?void 0:x,onDblclick:e.editable&&e.editableTrigger==="dblclick"?x:void 0},[e.editable&&I.editing?(0,r.createVNode)("input",{value:U.value,onChange:H,style:{padding:"3px 8px",border:"1px solid #eee",boxShadow:"none",boxSizing:"border-box",borderRadius:5,fontFamily:"inherit"}},null):X()]),l.showComma&&(0,r.createVNode)("span",null,[","]),e.showLength&&e.collapsed&&(0,r.createVNode)("span",{class:"vjs-comment"},[(0,r.createTextVNode)(" // "),l.length,(0,r.createTextVNode)(" items ")])])])}}});function q(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);a&&(c=c.filter(function(D){return Object.getOwnPropertyDescriptor(e,D).enumerable})),n.push.apply(n,c)}return n}function j(e){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?q(Object(n),!0).forEach(function(c){F(e,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(n,c))})}return e}var ie=(0,r.defineComponent)({name:"Tree",props:j(j({},R),{},{data:{type:Object,default:null},deep:{type:Number,default:1/0},pathCollapsible:{type:Function,default:function(){return!1}},rootPath:{type:String,default:"root"},virtual:{type:Boolean,default:!1},height:{type:Number,default:400},itemHeight:{type:Number,default:20},selectedValue:{type:[String,Array],default:function(){return""}},collapsedOnClickBrackets:{type:Boolean,default:!0},style:Object,onSelectedChange:{type:Function}}),slots:["renderNodeKey","renderNodeValue"],emits:["nodeClick","bracketsClick","iconClick","selectedChange","update:selectedValue","update:data"],setup:function(e,a){var n=a.emit,c=a.slots,D=(0,r.ref)(),w=(0,r.computed)(function(){return O(e.data,e.rootPath)}),E=(0,r.reactive)({translateY:0,visibleData:null,hiddenPaths:w.value.reduce(function(u,l){var s,k=l.level>=e.deep,S=(s=e.pathCollapsible)===null||s===void 0?void 0:s.call(e,l);return l.type!=="objectStart"&&l.type!=="arrayStart"||!k&&!S?u:j(j({},u),{},F({},l.path,1))},{})}),G=(0,r.computed)(function(){for(var u=null,l=[],s=w.value.length,k=0;k<s;k++){var S=j(j({},w.value[k]),{},{id:k}),L=E.hiddenPaths[S.path];if(u&&u.path===S.path){var Y=u.type==="objectStart",de=j(j(j({},S),u),{},{showComma:S.showComma,content:Y?"{...}":"[...]",type:Y?"objectCollapsed":"arrayCollapsed"});u=null,l.push(de)}else{if(L&&!u){u=S;continue}if(u)continue;l.push(S)}}return l}),T=(0,r.computed)(function(){var u=e.selectedValue;return u&&e.selectableType==="multiple"&&Array.isArray(u)?u:[u]}),I=(0,r.computed)(function(){return!e.selectableType||e.selectOnClickNode||e.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}),H=function(){var u=G.value;if(e.virtual){var l,s=e.height/e.itemHeight,k=((l=D.value)===null||l===void 0?void 0:l.scrollTop)||0,S=Math.floor(k/e.itemHeight),L=S<0?0:S+s>u.length?u.length-s:S;L<0&&(L=0);var Y=L+s;E.translateY=L*e.itemHeight,E.visibleData=u.filter(function(de,ce){return ce>=L&&ce<Y})}else E.visibleData=u},U=function(){H()},X=function(u){var l,s,k=u.path,S=e.selectableType;if(S==="multiple"){var L=T.value.findIndex(function(Q){return Q===k}),Y=C(T.value);L!==-1?Y.splice(L,1):Y.push(k),n("update:selectedValue",Y),n("selectedChange",Y,C(T.value))}else if(S==="single"&&T.value[0]!==k){var de=(l=T.value,s=1,function(Q){if(Array.isArray(Q))return Q}(l)||function(Q,Se){var le=Q==null?null:typeof Symbol<"u"&&Q[Symbol.iterator]||Q["@@iterator"];if(le!=null){var Be,Ee,ve=[],ge=!0,De=!1;try{for(le=le.call(Q);!(ge=(Be=le.next()).done)&&(ve.push(Be.value),!Se||ve.length!==Se);ge=!0);}catch(Te){De=!0,Ee=Te}finally{try{ge||le.return==null||le.return()}finally{if(De)throw Ee}}return ve}}(l,s)||B(l,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())[0],ce=k;n("update:selectedValue",ce),n("selectedChange",ce,de)}},o=function(u){n("nodeClick",u)},h=function(u,l){if(u)E.hiddenPaths=j(j({},E.hiddenPaths),{},F({},l,1));else{var s=j({},E.hiddenPaths);delete s[l],E.hiddenPaths=s}},_=function(u,l){e.collapsedOnClickBrackets&&h(u,l),n("bracketsClick",u)},J=function(u,l){h(u,l),n("iconClick",u)},x=function(u,l){var s=$(e.data),k=e.rootPath;new Function("data","val","data".concat(l.slice(k.length),"=val"))(s,u),n("update:data",s)};return(0,r.watchEffect)(function(){I.value&&function(u){throw new Error("[VueJSONPretty] ".concat(u))}(I.value)}),(0,r.watchEffect)(function(){G.value&&H()}),function(){var u,l,s=(u=e.renderNodeKey)!==null&&u!==void 0?u:c.renderNodeKey,k=(l=e.renderNodeValue)!==null&&l!==void 0?l:c.renderNodeValue,S=E.visibleData&&E.visibleData.map(function(L){return(0,r.createVNode)(ne,{key:L.id,node:L,collapsed:!!E.hiddenPaths[L.path],showDoubleQuotes:e.showDoubleQuotes,showLength:e.showLength,checked:T.value.includes(L.path),selectableType:e.selectableType,showLine:e.showLine,showLineNumber:e.showLineNumber,showSelectController:e.showSelectController,selectOnClickNode:e.selectOnClickNode,nodeSelectable:e.nodeSelectable,highlightSelectedNode:e.highlightSelectedNode,editable:e.editable,editableTrigger:e.editableTrigger,showIcon:e.showIcon,renderNodeKey:s,renderNodeValue:k,onNodeClick:o,onBracketsClick:_,onIconClick:J,onSelectedChange:X,onValueChange:x,style:e.itemHeight&&e.itemHeight!==20?{lineHeight:"".concat(e.itemHeight,"px")}:{}},null)});return(0,r.createVNode)("div",{ref:D,class:{"vjs-tree":!0,"is-virtual":e.virtual},onScroll:e.virtual?U:void 0,style:e.showLineNumber?j({paddingLeft:"".concat(12*Number(w.value.length.toString().length),"px")},e.style):e.style},[e.virtual?(0,r.createVNode)("div",{class:"vjs-tree-list",style:{height:"".concat(e.height,"px")}},[(0,r.createVNode)("div",{class:"vjs-tree-list-holder",style:{height:"".concat(G.value.length*e.itemHeight,"px")}},[(0,r.createVNode)("div",{class:"vjs-tree-list-holder-inner",style:{transform:"translateY(".concat(E.translateY,"px)")}},[S])])]):S])}}})}(),V}()})})(Pe);const Nt=He(Pe.exports);const At=fe({__name:"JsonPreview",props:{data:Object},setup(t){return(v,N)=>(he(),Ue(ke(Nt),{path:"res",deep:3,showLength:!0,data:t.data},null,8,["data"]))}}),Ot=Ae(Dt);Ae(At);const jt=fe({name:"devapi",components:{AddForm:_t,Icon:ct,GroupForm:ft,CodeEditor:Ot,FieldModal:kt,ButtonGroup:je.Group},setup(){const t=Me(),v=z([]),N=z(oe.JSON),{copy:A}=mt(),[f,{openModal:g}]=we(),[V,{openModal:y}]=we(),[B,{openModal:C}]=we(),F=z({cid:0,title:"",url:""}),r=z([]),re={id:0,title:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u63A5\u53E3",url:"",method:"get",param:'{"title":"\u793A\u4F8B\u53C2\u6570"}',des:"",tablename:"",useFrom:"pc"},m=z();m.value=pe(re);const Z={step:"none",result:"",laoding:"waiting",status:200,message:"",code:0},i=z();i.value=pe(Z);const O=Je({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0}),{loading:te,setLoading:$}=it(!0),ae=z([]),ue=async()=>{const o=await gt(),h=[{id:0,name:"\u5168\u90E8\u5206\u7EC4",pid:0}];o?r.value=h.concat(o):r.value=h,_e(()=>{q()})},R=z(null),ne=z(1200);Oe(()=>{ue(),ne.value=R.value?R.value.$el.offsetWidth:1200,window.onresize=()=>{ne.value=R.value?R.value.$el.offsetWidth:1100}});const q=async()=>{$(!0);try{const o=await yt({page:O.current,pageSize:O.pageSize,...F.value});ae.value=o.items,O.current=o.page,O.total=o.total}catch{}finally{$(!1)}},j=o=>{O.current=o,q()},ie=o=>{O.pageSize=o,q()},e=()=>{g(!0,{isUpdate:!1,record:null})},a=async o=>{g(!0,{isUpdate:!0,record:o})},n=async()=>{q()},c=async o=>{try{W.loading({content:"\u5220\u9664\u4E2D",id:"upStatus"}),await bt({ids:[o.id]})&&(q(),W.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus"}))}catch{W.clear("top")}},D=()=>{y(!0,{isUpdate:!1,record:null})},w=z({name:"",rooturl:"",verifyEncrypt:"",isself:0}),E=async o=>{G(o),v.value=[o.id],w.value=await vt({id:o.type_id})},G=o=>{i.value={step:"none",result:"",laoding:"waiting",status:200,message:"",code:0};let h=pe(o.url);m.value.url="",o.apicode_type==2&&(h=pe(`${h}?apiID=${o.id}`)),m.value={id:o.id,title:o.title,url:h,method:o.method,param:o.param,des:o.des,tablename:o.tablename,useFrom:o.useFrom,istoken:o.istoken}},T=async o=>{await A(o),W.success({content:"\u590D\u5236\u6210\u529F",id:"copysuccess"})},I=async()=>{if(!m.value.url){W.warning("\u8BF7\u9009\u62E9\u6D4B\u8BD5\u63A5\u53E3\uFF01");return}if(i.value.laoding="processing",w.value.isself==1){const o=await U();o&&(i.value.result=o.data.data,i.value.status=o.status,i.value.message=o.data.message,i.value.code=o.data.code,o.data.code==0?i.value.laoding="success":i.value.laoding="error")}else if(w.value.isself==0){const o=await H();o&&(i.value.result=o.data.data,i.value.status=o.status,i.value.message=o.data.message,i.value.code=o.data.code,o.data.code==0?i.value.laoding="success":i.value.laoding="error")}else W.warning({content:`\u63A5\u53E3\u7C7B\u578B\u65E0\u6CD5\u8BC6\u522B${m.value.useFrom}`,id:"wm"}),i.value.laoding="waiting"};async function H(){var x,u,l;var o={};m.value.param&&(o=JSON.parse(m.value.param)),console.log("",w.value);const h=Date.parse(new Date().toString())/1e3;let _={}.VITE_APP_ENV=="production"?w.value.rooturl:window==null?void 0:window.globalConfig.Root_wxurl_dev,J="";if(m.value.istoken==1){const s=await Ct({baseURL:_,url:w.value.login_url,params:{user_id:w.value.user_id}});s.code==0&&(J=s.data)}return m.value.method=="get"?ye.get(_+m.value.url,{params:o,headers:{"verify-time":h.toString(),"verify-encrypt":be.exports(w.value.verifyEncrypt+h),Authorization:J,Businessid:((x=t.$state)==null?void 0:x.businessID)+""}}).catch(s=>{i.value.laoding="error",i.value.message=s.message,i.value.status=s.response.status,i.value.result=s.response.data.message}):m.value.method=="post"?ye.post(_+m.value.url,o,{headers:{"verify-time":h.toString(),"verify-encrypt":be.exports(w.value.verifyEncrypt+h),Authorization:J,Businessid:((u=t.$state)==null?void 0:u.businessID)+""}}).catch(s=>{i.value.laoding="error",i.value.message=s.message,i.value.status=s.response.status,i.value.result=s.response.data.message}):m.value.method=="delete"?ye.delete(_+m.value.url,{data:o,headers:{"verify-time":h.toString(),"verify-encrypt":be.exports(w.value.verifyEncrypt+h),Authorization:J,Businessid:((l=t.$state)==null?void 0:l.businessID)+""}}).catch(s=>{i.value.laoding="error",i.value.message=s.message,i.value.status=s.response.status,i.value.result=s.response.data.message}):!1}function U(){var o={};m.value.param&&(o=JSON.parse(m.value.param));var h=m.value.url.split("/");return h[0]=="business"?m.value.url=m.value.url.split("business")[1]:h.length>1&&h[1]=="business"&&(m.value.url=m.value.url.split("/business")[1]),console.log(m.value.url),m.value.method=="get"?Ce.get({url:m.value.url,params:o},{isReturnNativeResponse:!0}).catch(_=>{i.value.laoding="error",i.value.message=_.message,i.value.status=_.response.status,i.value.result=_.response.data.message}):m.value.method=="post"?Ce.post({url:m.value.url,params:o},{isReturnNativeResponse:!0}).catch(_=>{i.value.laoding="error",i.value.message=_.message,i.value.status=_.response.status,i.value.result=_.response.data.message}):m.value.method=="delete"?Ce.delete({url:m.value.url,params:o},{isReturnNativeResponse:!0}).catch(_=>{i.value.laoding="error",i.value.message=_.message,i.value.status=_.response.status,i.value.result=_.response.data.message}):!1}return{columns:ht,dayjs:We,loading:te,pagination:O,renderData:ae,handlePaageChange:j,handlePaageSizeChange:ie,createRule:e,handleEdit:a,handleDel:c,registerModal:f,handleData:n,registerFieldModal:B,searchData:F,groupList:r,registerGroupModal:V,handleGroup:D,requestData:m,requestAfter:i,handleRowClick:E,copyText:T,handleQuest:I,modeValue:N,showField:async o=>{if(!o){W.error({content:"\u8BF7\u9009\u62E9\u67E5\u770B\u7684\u63A5\u53E3/\u63A5\u53E3\u4E0D\u5B58\u5728\u6570\u636E\u8868",id:"upStatus"});return}try{W.loading({content:"\u83B7\u53D6\u5B57\u6BB5\u6570\u636E\u4E2D",id:"upStatus"});const h=await wt({tablename:o});h&&(C(!0,{isUpdate:!0,record:h}),W.success({content:"\u83B7\u53D6\u5B57\u6BB5\u6210\u529F",id:"upStatus"}))}catch{W.clear("top")}},userInfo:t,cardboxWidth:ne,onelineCardRef:R,selectedKeys:v}}});const K=t=>(rt("data-v-0cfcbd2a"),t=t(),st(),t),Vt={class:"container"},Pt={class:"devapi"},Tt={class:"left"},xt={class:"tigbox"},Lt=K(()=>d("div",{class:"title"},"\u8BF7\u6C42\u8BF4\u660E\uFF1A",-1)),It={class:"item"},Mt=K(()=>d("div",{class:"label"},"1.\u5C0F\u7A0B\u5E8F\u3001app\u8BF7\u6C42\u5934\u6DFB\u52A0\u201CBusinessid\u201D\u503C\uFF1A",-1)),zt={class:"text"},$t=K(()=>d("div",{class:"item"},[d("div",{class:"label"},"2.\u8BF7\u6C42\u9700\u8981Token\u65F6\uFF0C\u8BF7\u5728\u8BF7\u6C42\u5934\u52A0\u201CAuthorization\u201D\u503C\u662FToken"),d("div",{class:"text"})],-1)),Rt=K(()=>d("div",{class:"item"},[d("div",{class:"label"},[P("3.\u63A5\u53E3\u8BF7\u6C42\u9A8C\u8BC1\uFF0C\u8BF7\u6C42\u5934\u6DFB\u52A0 verify-time(\u65F6\u95F4\u6233)\u548Cverify-encrypt=md5(\u65F6\u95F4\u6233+\u63A5\u53E3\u9A8C\u8BC1\u5B57\u7B26\u4E32),\u63A5\u53E3\u9A8C\u8BC1\u5B57\u7B26\u4E32\u5728"),d("span",{style:{color:"#165dff"}},"\u7BA1\u7406\u5206\u7EC4->\u63A5\u53E3\u914D\u7F6E"),P("\u4E2D")]),d("div",{class:"text"})],-1)),qt=K(()=>d("div",{class:"item"},[d("div",{class:"label"},[P("4.\u63A5\u53E3\u81EA\u52A8\u751F\u6210\u65F6\uFF0C\u5982\u679C\u65B0\u589E\u6A21\u5757\uFF08\u4F8B\u5982admin\uFF09\u8BF7\u624B\u52A8\u628A\u6A21\u5757\u8DEF\u7531\u6DFB\u52A0\u5230route\\router.go\u4E0B,\u540C\u6837\u4E5F\u9700\u624B\u52A8\u5220\u9664\uFF0C\u8FD9\u79CD\u60C5\u51B5\u6BD4\u8F83\u5C11\u7CFB\u7EDF\u4E0D\u518D\u81EA\u52A8\u6DFB\u52A0\u3002"),d("a",{href:"https://doc.goflys.cn/docview?id=25&fid=274",target:"_blank",style:{color:"#165dff"}},"\u53BB\u5F00\u53D1\u6587\u6863\u67E5\u770B\u66F4\u591A")]),d("div",{class:"text"})],-1)),Gt={class:"right"},Ht={class:"items-center"},Ut=K(()=>d("span",{class:"text-label"},"\u63A5\u53E3\u540D\u79F0: ",-1)),Jt={class:"text-title"},Wt={class:"handlebox"},Kt={class:"url"},Yt={class:"parambox"},Qt={class:"doEvant"},Zt=K(()=>d("div",{class:"popovertitle"}," \u63A5\u53E3\u8BF4\u660E ",-1)),Xt={class:"showapides"},ea=["innerHTML"],ta={class:"requtback"},aa=K(()=>d("div",{class:"text-label"},"\u8BF7\u6C42\u7ED3\u679C ",-1)),na={class:"field_item"},oa=K(()=>d("div",{class:"label"},"\u8BF7\u6C42\u72B6\u6001\uFF1A",-1)),ua={class:"text"},la={class:"field_item"},ra=K(()=>d("div",{class:"label"},"\u8BF7\u6C42\u7ED3\u679C\uFF1A",-1)),sa={class:"text"},ia={class:"respdata"};function ca(t,v,N,A,f,g){const V=ee("Breadcrumb"),y=Ke,B=Ye,C=je,F=Qe,r=Ze,re=Xe,m=ee("Icon"),Z=et,i=tt,se=at,O=ee("icon-copy"),te=ee("CodeEditor"),$=nt,ae=ot,ue=ut,R=ee("ButtonGroup"),ne=lt,q=ee("AddForm"),j=ee("GroupForm"),ie=ee("FieldModal");return he(),Fe("div",Vt,[p(V,{items:["developer.title","developer.apidoc.title"]},null,8,["items"]),p(ne,{class:"general-card onelineCard",ref:"onelineCardRef",style:{height:"calc(100% - 50px)"}},{default:b(()=>[d("div",Pt,[d("div",Tt,[p(re,{style:{"margin-bottom":"10px"}},{default:b(()=>[p(r,{span:12},{default:b(()=>[p(F,null,{default:b(()=>[p(y,{placeholder:"\u9009\u62E9\u5206\u7EC4",data:t.groupList,style:{width:"120px"},fieldNames:{key:"id",title:"name",children:"children"},modelValue:t.searchData.cid,"onUpdate:modelValue":v[0]||(v[0]=e=>t.searchData.cid=e)},null,8,["data","modelValue"]),p(B,{style:{width:"180px"},modelValue:t.searchData.title,"onUpdate:modelValue":v[1]||(v[1]=e=>t.searchData.title=e),placeholder:"\u8F93\u5165\u63A5\u53E3\u540D\u79F0",onPressEnter:t.handleData,"allow-clear":""},null,8,["modelValue","onPressEnter"]),p(B,{style:{width:"180px"},modelValue:t.searchData.url,"onUpdate:modelValue":v[2]||(v[2]=e=>t.searchData.url=e),placeholder:"\u8F93\u5165\u8BF7\u6C42\u5730\u5740",onPressEnter:t.handleData,"allow-clear":""},null,8,["modelValue","onPressEnter"]),p(C,{type:"primary",onClick:t.handleData},{default:b(()=>[P("\u67E5\u627E")]),_:1},8,["onClick"])]),_:1})]),_:1}),p(r,{span:12,style:{"text-align":"right"}},{default:b(()=>[p(F,null,{default:b(()=>[p(C,{type:"primary",onClick:t.createRule},{default:b(()=>[P(M(t.$t("developer.apidoc.createapi")),1)]),_:1},8,["onClick"]),p(C,{type:"primary",onClick:t.handleGroup},{default:b(()=>[P(M(t.$t("developer.apidoc.mgroun")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),d("div",{class:"tablebox",style:me({width:t.cardboxWidth-410+"px"})},[p(se,{"row-key":"id",loading:t.loading,pagination:t.pagination,columns:t.columns,data:t.renderData,bordered:{wrapper:!0,cell:!0},size:"large",scroll:{x:1e3},"default-expand-all-rows":!0,ref:"artable","selected-keys":t.selectedKeys,onPageChange:t.handlePaageChange,onPageSizeChange:t.handlePaageSizeChange,onRowClick:t.handleRowClick},{createtime:b(({record:e})=>[P(M(t.dayjs(e.createtime*1e3).format("YYYY-MM-DD")),1)]),status:b(({record:e})=>[P(M(e.status==0?"\u6B63\u5E38":"\u672A\u542F\u7528"),1)]),istoken:b(({record:e})=>[d("span",{style:me({color:e.istoken==0?"gray":"orangered"})},M(e.istoken==0?"\u4E0D\u9700":"\u9700\u8981"),5)]),operations:b(({record:e})=>[p(m,{icon:"svgfont-bianji1",class:"iconbtn",onClick:a=>t.handleEdit(e),size:18,color:"#0960bd"},null,8,["onClick"]),p(Z,{direction:"vertical"}),p(i,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:a=>t.handleDel(e)},{default:b(()=>[p(m,{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","selected-keys","onPageChange","onPageSizeChange","onRowClick"])],4),d("div",xt,[Lt,d("div",It,[Mt,d("div",zt,M(t.userInfo.$state.businessID),1)]),$t,Rt,qt])]),d("div",Gt,[d("div",Ht,[Ut,d("span",Jt,M(t.requestData.title),1)]),p(Z,{dashed:"",style:{margin:"10px 0px"}}),d("div",Wt,[d("div",Kt,[P("\u8BF7\u6C42\u5730\u5740\uFF1A"),d("a",{onClick:v[3]||(v[3]=e=>t.copyText(t.requestData.url))},[P(M(t.requestData.url)+" ",1),p(O)])])]),d("div",Yt,[p(te,{value:t.requestData.param,"onUpdate:value":v[4]||(v[4]=e=>t.requestData.param=e),mode:t.modeValue},null,8,["value","mode"])]),d("div",Qt,[p(F,null,{default:b(()=>[p(ae,{style:{width:"95px"},modelValue:t.requestData.method,"onUpdate:modelValue":v[5]||(v[5]=e=>t.requestData.method=e),placeholder:"\u9009\u62E9\u8BF7\u6C42\u65B9\u5F0F"},{default:b(()=>[p($,{value:"get"},{default:b(()=>[P("get")]),_:1}),p($,{value:"post"},{default:b(()=>[P("post")]),_:1}),p($,{value:"delete"},{default:b(()=>[P("delete")]),_:1})]),_:1},8,["modelValue"]),p(C,{type:"primary",onClick:t.handleQuest},{default:b(()=>[P("\u7ACB\u5373\u8BF7\u6C42")]),_:1},8,["onClick"]),p(R,{status:"warning"},{default:b(()=>[p(ue,{position:"tr",title:"\u63A5\u53E3\u8BF4\u660E",trigger:"click"},{title:b(()=>[Zt,p(Z,{dashed:"",style:{margin:"5px 0px"}})]),content:b(()=>[d("div",Xt,[d("div",{class:"text",innerHTML:t.requestData.des},null,8,ea)])]),default:b(()=>[p(C,null,{default:b(()=>[P("\u67E5\u770B\u8BF4\u660E")]),_:1})]),_:1}),p(C,{onClick:v[6]||(v[6]=e=>t.showField(t.requestData.tablename))},{default:b(()=>[P("\u67E5\u770B\u5B57\u6BB5")]),_:1})]),_:1})]),_:1})]),d("div",ta,[aa,p(Z,{dashed:"",style:{margin:"10px 0px"}}),d("div",na,[oa,d("div",ua,M(t.requestAfter.laoding),1)]),d("div",la,[ra,d("div",sa,[d("span",{class:"mr-4",style:me({color:t.requestAfter.status==200?"#108ee9":"#f50"})},M(t.requestAfter.status),5),d("span",{class:"mr-4",style:me({color:t.requestAfter.status==200?"#108ee9":"#f50"})},"\u63D0\u793A("+M(t.requestAfter.code)+")\uFF1A"+M(t.requestAfter.message),5)])]),d("div",ia,[p(te,{value:t.requestAfter.result,"onUpdate:value":v[7]||(v[7]=e=>t.requestAfter.result=e),readonly:"",mode:t.modeValue},null,8,["value","mode"])])])])])]),_:1},512),p(q,{onRegister:t.registerModal,onSuccess:t.handleData},null,8,["onRegister","onSuccess"]),p(j,{onRegister:t.registerGroupModal,onSuccess:t.handleData},null,8,["onRegister","onSuccess"]),p(ie,{onRegister:t.registerFieldModal},null,8,["onRegister"])])}const Ha=ze(jt,[["render",ca],["__scopeId","data-v-0cfcbd2a"]]);export{Ha as default};
