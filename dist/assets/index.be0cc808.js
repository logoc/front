import{_ as U}from"./index.a2bf8911.js";/* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{c as H,d as N,e as c,u as A,r as R,c0 as L,aS as u,aL as f,C as Y,aE as j,aH as n,G as $,F as O,aI as a,aN as r,aO as F,bU as G,aW as W,cb as X,aY as q,bb as x,b_ as J,c4 as K,bj as Q,aX as Z,b$ as ee,c6 as te,bP as ae}from"./arco.b02d9b55.js";import{B as oe,u as ne}from"./index.c4821ce7.js";import{u as se}from"./loading.7f7bf96d.js";import{a as ie,u as le,d as re}from"./picturecate.1f8d9eeb.js";import{I as ce}from"./IconPicker.7129cb1a.js";import{I as ue}from"./Icon.031e5930.js";import de from"./AddForm.9fe74f0e.js";import"./chart.67655b2c.js";import"./vue.e4c26cfd.js";/* empty css               *//* empty css                */const pe=H(()=>[{title:"ID",dataIndex:"id",width:80,align:"center"},{title:"\u540D\u79F0",dataIndex:"name",align:"center"},{title:"\u63CF\u8FF0",dataIndex:"des",align:"center"},{title:"\u7C7B\u578B",dataIndex:"type",slotName:"type",align:"center"},{title:"\u72B6\u6001",dataIndex:"status",slotName:"status",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createtime",slotName:"createtime",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",align:"center"}]),me=N({name:"cateindex",components:{BasicModal:oe,IconPicker:ce,Icon:ue,AddForm:de},emits:["success"],setup(e,{emit:d}){const b=c(!1),V=c(620),S=c(620),v=c([]),{loading:w,setLoading:_}=se(!0),[I,{setModalProps:p,closeModal:k}]=ne(async t=>{p({confirmLoading:!1}),b.value=!!(t!=null&&t.isUpdate),l()}),m=()=>({title:"",name:"",createdTime:[],status:""}),g=c(m()),l=async()=>{_(!0);try{const t=await ie({page:i.current,pageSize:i.pageSize,...g.value});v.value=t.items,i.current=t.page,i.total=t.total}catch{}finally{_(!1)}},B=H(()=>A(b)?"\u7F16\u8F91\u6570\u636E":"\u5206\u7C7B\u7BA1\u7406"),D=t=>{S.value=t},i=R({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0}),P=t=>{i.current=t,l()},T=t=>{i.pageSize=t,l()},z=async t=>{try{u.loading({content:"\u66F4\u65B0\u72B6\u6001\u4E2D",id:"upStatus"}),await le({id:t.id,status:t.status})&&u.success({content:"\u66F4\u65B0\u72B6\u6001\u6210\u529F",id:"upStatus"})}catch{u.clear("top")}},E=async t=>{try{u.loading({content:"\u5220\u9664\u4E2D",id:"upStatus"}),await re({ids:[t.id]})&&(l(),u.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus"}))}catch{u.clear("top")}},o=c();return{registerModal:I,getTitle:B,columns:pe,loading:w,dayjs:L,modelHeight:V,onHeightChange:D,windHeight:S,pagination:i,handlePaageChange:P,handlePaageSizeChange:T,handleStatus:z,handleDel:E,handleEdit:async t=>{o.value.ShowModal({isUpdate:!0,record:t})},renderData:v,formModel:g,search:()=>{l()},reset:()=>{g.value=m(),l()},createData:async()=>{o.value.ShowModal({isUpdate:!1,record:null})},addFormRef:o,getTypeFont:(t,h)=>{var y="",C="";return t==0?(y="\u7D20\u6750\u56FE",C="cyan"):t==1?(y="\u63D2\u56FE",C="blue"):t==2&&(y="\u516C\u5171",C="arcoblue"),h=="color"?C:y}}}});const ge={class:"table-content"};function he(e,d,b,V,S,v){const w=W,_=X,I=f("icon-search"),p=q,k=x,m=J,g=f("icon-plus"),l=K,B=Q,D=Z,M=f("Icon"),i=ee,P=te,T=ae,z=f("AddForm"),E=f("BasicModal");return Y(),j(E,G(e.$attrs,{onRegister:e.registerModal,isPadding:!1,footer:!1,loading:e.loading,width:"1000px",onHeightChange:e.onHeightChange,minHeight:e.modelHeight,title:e.getTitle}),{default:n(()=>[$("div",{class:"modalbox",style:O({"min-height":`${e.windHeight}px`})},[$("div",ge,[a(l,{style:{"margin-bottom":"10px"}},{default:n(()=>[a(m,{span:16},{default:n(()=>[a(k,null,{default:n(()=>[a(w,{style:{width:"160px"},modelValue:e.formModel.name,"onUpdate:modelValue":d[0]||(d[0]=o=>e.formModel.name=o),placeholder:"\u540D\u79F0","allow-clear":""},null,8,["modelValue"]),a(_,{modelValue:e.formModel.createdTime,"onUpdate:modelValue":d[1]||(d[1]=o=>e.formModel.createdTime=o),style:{width:"200px"}},null,8,["modelValue"]),a(p,{type:"primary",onClick:e.search},{icon:n(()=>[a(I)]),default:n(()=>[r(" \u67E5\u8BE2 ")]),_:1},8,["onClick"]),a(p,{onClick:e.reset},{default:n(()=>[r(F(e.$t("searchTable.form.reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),a(m,{span:8,style:{"text-align":"right"}},{default:n(()=>[a(k,null,{default:n(()=>[a(p,{type:"primary",onClick:e.createData},{icon:n(()=>[a(g)]),default:n(()=>[r(" "+F(e.$t("searchTable.operation.create")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),a(T,{"row-key":"id",loading:e.loading,pagination:e.pagination,columns:e.columns,data:e.renderData,bordered:{wrapper:!0,cell:!0},size:"medium","default-expand-all-rows":!0,ref:"artable",onPageChange:e.handlePaageChange,onPageSizeChange:e.handlePaageSizeChange},{createtime:n(({record:o,column:s})=>[r(F(e.dayjs(o[s.dataIndex]*1e3).format("YYYY-MM-DD")),1)]),type:n(({record:o,column:s})=>[a(B,{color:e.getTypeFont(o[s.dataIndex],"color")},{default:n(()=>[r(F(e.getTypeFont(o[s.dataIndex],"text")),1)]),_:2},1032,["color"])]),status:n(({record:o})=>[a(D,{type:"round",modelValue:o.status,"onUpdate:modelValue":s=>o.status=s,"checked-value":0,"unchecked-value":1,onChange:s=>e.handleStatus(o)},{checked:n(()=>[r(" \u5F00 ")]),unchecked:n(()=>[r(" \u5173 ")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),operations:n(({record:o})=>[a(M,{icon:"svgfont-bianji1",class:"iconbtn",onClick:s=>e.handleEdit(o),size:18,color:"#0960bd"},null,8,["onClick"]),a(i,{direction:"vertical"}),a(P,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:s=>e.handleDel(o)},{default:n(()=>[a(M,{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","onPageChange","onPageSizeChange"])])],4),a(z,{ref:"addFormRef",onSuccess:e.search},null,8,["onSuccess"])]),_:1},16,["onRegister","loading","onHeightChange","minHeight","title"])}const xe=U(me,[["render",he],["__scopeId","data-v-ee37bf1e"]]);export{xe as default};
