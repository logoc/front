import{_ as ee}from"./index.a2bf8911.js";/* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css               */import{d as te,e as r,o as se,aL as A,C as u,D as d,aI as o,u as _,aH as p,G as s,aO as b,aN as k,aK as ae,aJ as oe,aF as f,E as le,aE as ne,aR as ie,aS as v,ca as ue,b9 as ce,aY as re,aW as de,br as _e,c7 as pe,bO as ve,b2 as me,b3 as he}from"./arco.b02d9b55.js";import{u as fe}from"./loading.7f7bf96d.js";import{a as ge,d as Fe,s as Ce}from"./FileLibrary.aa44c3ce.js";import{a as ke}from"./index.c4821ce7.js";import ye from"./FileManage.59225568.js";import{I as M}from"./Icon.031e5930.js";import{h as be}from"./vue.e4c26cfd.js";import"./chart.67655b2c.js";/* empty css                */import"./lodash.b99388fa.js";const V=g=>(me("data-v-0080b170"),g=g(),he(),g),Ee={class:"container"},xe={class:"funcard"},Be={class:"baseinfo"},ze={class:"raw"},Ie={class:"lf"},Se={class:"md"},De=V(()=>s("div",{class:"text"}," \u5BB9\u91CF\uFF1A ",-1)),we={class:"pree"},Ae={class:"rt"},Me={class:"all"},Ve={class:"use"},Pe={class:"listbox"},Ue={class:"tablebox"},Le={class:"header"},Ne={class:"tool"},Oe={class:"check"},Te=V(()=>s("span",{style:{"user-select":"none"}},"\u672C\u9875\u5168\u9009",-1)),Re={class:"del"},Ge={class:"updata"},He={class:"filecontext"},Ke={class:"filePreview"},$e={class:"file_list_box"},je={class:"file_item"},Je=["onClick"],We={class:"img_raw"},Ye={key:0,class:"img_preview"},qe=["src"],Qe={key:1,class:"img_preview video_preview"},Xe=["src"],Ze=["onClick"],et={class:"titlebox"},tt={class:"edit_title"},st={key:0,class:"empty"},at={key:0,class:"pagination"},ot={name:"article"},lt=te({...ot,setup(g){const E=be(),[P,{openModal:x}]=ke();document.documentElement.clientHeight;const{loading:B,setLoading:z}=fe(!0);r([]);const U=r((()=>({title:"",name:"",createdTime:[],status:""}))());r({allnumber:0,fileSize:0,allsize:0});const n=r({allnumber:0,usesize:0,fileSize:0}),I=r(!1),t=r({checkedAll:!1,selectIds:[],picture:[],current:1,pageSize:27,total:0,allnumber:0,allsize:0,searchword:"",fileSize:0,loading:!1}),F=async()=>{z(!0);try{const e=await ge({page:t.value.current,pageSize:t.value.pageSize,...U.value});t.value.picture=e.items,t.value.current=e.page,t.value.total=e.total,n.value=e.datainfo}catch{}finally{z(!1)}};se(()=>{F()});const L=e=>{e?(t.value.picture.forEach(l=>{t.value.selectIds.push(l.id)}),t.value.checkedAll=!0):(t.value.selectIds=[],t.value.checkedAll=!1)},N=()=>{t.value.selectIds.length>0&&S(t.value.selectIds)},O=e=>{S([e])},S=e=>{ie.warning({title:"\u60A8\u786E\u5B9A\u5220\u9664\u5417\uFF1F",content:"\u5220\u9664\u540E\u5185\u5BB9\u5C06\u65E0\u6CD5\u6062\u590D\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",cancelText:"\u53D6\u6D88",okText:"\u5220\u9664",titleAlign:"start",hideCancel:!1,onOk:async()=>{v.loading({content:"\u5220\u9664\u4E2D",id:"delFile",duration:0}),await Fe({ids:e})?(e.forEach(h=>{t.value.picture=t.value.picture.filter(m=>h!=m.id)}),v.success({content:"\u5220\u9664\u6210\u529F",id:"delFile",duration:2})):v.error({content:"\u5220\u9664\u5931\u8D25",id:"delFile",duration:2})}})},y=r(!1),T=()=>{y.value=!0},D=async(e,l)=>{const h=l.target._value;if(y.value){y.value=!1,v.loading({content:"\u66F4\u65B0\u4E2D...",id:"upFile",duration:0});const m=await Ce({id:e,title:h});m?v.success({content:"\u66F4\u65B0\u6210\u529F\uFF01",id:"upFile",duration:2}):m==0?v.clear():v.error({content:"\u66F4\u65B0\u5931\u8D25",id:"upFile",duration:2})}},R=e=>{t.value.selectIds.indexOf(e.id)>-1?t.value.selectIds=t.value.selectIds.filter(l=>l!=e.id):t.value.selectIds.push(e.id),t.value.selectIds.length==t.value.picture.length?t.value.checkedAll=!0:t.value.checkedAll=!1},G=()=>{x(!0,{filetype:"video",getnumber:"one",openfrom:"manage"})},H=()=>{x(!0,{filetype:"image",getnumber:"more",openfrom:"manage"})},K=e=>{e.type=="more"?e.list.forEach(l=>{console.log("\u591A\u5F20\u9644\u4EF6\u8FD4\u56DE:",l)}):e.type=="one"&&console.log("\u5355\u5F20\u9644\u4EF6\u8FD4\u56DE:",e.url)},$=()=>{F()},j=e=>{t.value.current=e,F()},J=e=>{t.value.pageSize=e,F()},w=e=>e?e<i(1)?e+" B":e<i(2)?(e/i(1)).toFixed(2)+" KB":e<i(3)?(e/i(2)).toFixed(2)+" MB":e<i(4)?(e/i(3)).toFixed(2)+" GB":(e/i(4)).toFixed(2)+" TB":"";function i(e){return Math.pow(1024,e)}return(e,l)=>{const h=A("Breadcrumb"),m=ue,W=ce,C=re,Y=de,q=A("Empty"),Q=_e,X=pe,Z=ve;return u(),d("div",Ee,[o(h,{items:[_(E).matched[0].meta.locale,_(E).meta.locale]},null,8,["items"]),o(Z,{class:"general-card onelineCard",style:{height:"calc(100% - 50px)"}},{default:p(()=>[s("div",xe,[s("div",Be,[s("div",ze,[s("div",Ie,[s("span",null,"\u5171"+b(n.value.allnumber)+"\u4E2A\u6587\u4EF6",1)]),s("div",Se,[De,s("div",we,[o(m,{percent:n.value.fileSize>0?parseFloat((n.value.usesize/n.value.fileSize).toFixed(5)):0,size:"large",style:{width:"100%"},color:{"0%":"rgb(var(--primary-6))","100%":"rgb(var(--orange-6))"}},null,8,["percent","color"])])]),s("div",Ae,[s("span",Me,"\u603B\u91CF\uFF1A "+b(n.value.fileSize>0?w(n.value.fileSize):0),1),s("span",Ve,"\u5DF2\u7528\uFF1A"+b(n.value.usesize>0?w(n.value.usesize):0),1)])])]),s("div",Pe,[s("div",Ue,[s("div",Le,[s("div",Ne,[s("div",Oe,[o(W,{checked:I.value,"onUpdate:checked":l[0]||(l[0]=a=>I.value=a),onChange:L},{default:p(()=>[Te]),_:1},8,["checked"])]),s("div",Re,[o(C,{size:"small",disabled:t.value.selectIds.length==0,onClick:N},{default:p(()=>[k("\u5220\u9664")]),_:1},8,["disabled"])]),s("div",Ge,[o(C,{size:"small",onClick:G,style:{"margin-right":"5px"},preIcon:""},{default:p(()=>[k("\u4E0A\u4F20\u89C6\u9891")]),_:1}),o(C,{size:"small",onClick:H,style:{"margin-right":"5px"}},{default:p(()=>[k("\u4E0A\u4F20\u56FE\u7247")]),_:1}),o(C,{size:"small",onClick:$},{default:p(()=>[k("\u5237\u65B0\u5217\u8868")]),_:1})])])]),s("div",He,[s("div",Ke,[o(Q,{loading:_(B),tip:"\u52A0\u8F7D\u4E2D...",style:{width:"100%"}},{default:p(()=>[s("div",$e,[(u(!0),d(ae,null,oe(t.value.picture,a=>(u(),d("div",je,[s("div",null,[s("div",{class:"imgbox",onClick:c=>R(a)},[s("div",We,[a.type==0?(u(),d("div",Ye,[s("img",{src:a.url,class:"img_item"},null,8,qe)])):f("",!0),a.type==2?(u(),d("div",Qe,[s("img",{src:a.cover_url,class:"img_item"},null,8,Xe),o(_(M),{class:"folder_video",color:"#ffffff",animation:200,icon:"ic:twotone-slow-motion-video",size:24})])):f("",!0)]),s("div",{class:le(["edit_layer",{l_active:t.value.selectIds.indexOf(a.id)>-1}])},[s("i",{class:"colse",onClick:c=>O(a.id)},null,8,Ze),a.type==0?(u(),ne(_(M),{key:0,icon:"svgfont-mark_sel",class:"choose",size:18})):f("",!0)],2)],8,Je),s("div",et,[s("div",tt,[o(Y,{modelValue:a.title,"onUpdate:modelValue":c=>a.title=c,placeholder:"\u8F93\u5165\u540D\u79F0",onChange:T,style:{padding:"0"},onPressEnter:c=>{D(a.id,c)},onBlur:c=>{D(a.id,c)},bordered:!1},null,8,["modelValue","onUpdate:modelValue","onPressEnter","onBlur"])])])])]))),256)),!_(B)&&(!t.value.picture||t.value.picture.length==0)?(u(),d("div",st,[s("div",null,[o(q,{description:"\u6682\u65E0\u9644\u4EF6\uFF0C\u8BF7\u4E0A\u4F20\uFF01"})])])):f("",!0)])]),_:1},8,["loading"])])])]),t.value.total>=t.value.pageSize?(u(),d("div",at,[o(X,{total:t.value.total,"page-size":t.value.pageSize,onChange:j,onPageSizeChange:J,"show-total":"","show-jumper":"","show-page-size":""},null,8,["total","page-size"])])):f("",!0)])])]),_:1}),o(ye,{onRegister:_(P),onSuccess:K},null,8,["onRegister"])])}}});const wt=ee(lt,[["__scopeId","data-v-0080b170"]]);export{wt as default};
